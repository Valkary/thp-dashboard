import{c as D,a as S,g as x,b as V,f,t as p,M as _,h as P,e as b,i as u,k as U,l as B,m as Y}from"./web.65250034.js";import{a as G,b as z,T as q,r as y,s as H}from"./Table.7dc19e38.js";const K=p("<span>"),Q=p('<h3 class="text-xl font-bold">Trabajador'),W=p('<div class="w-full h-screen flex flex-col items-center gap-5"><h1 class="uppercase tracking-wide font-bold underline">José Salcedo Nuñez</h1><div class="flex justify-around uppercase w-full max-w-7xl"><h2>Nómina periodo <!#><!/></h2><h2 class="font-bold underline"></h2></div><!#><!/><div class="text-xs"><h3 class="font-bold uppercase">Trabajadores: <!#><!/></h3><h3 class="font-bold uppercase underline">Clave</h3><ul class="ml-5"><li>A = ASISTENCIA</li><li>B = BAJA</li><li>P = PERMISO (FALTA INJUSTIFICADA, NO AMERITA ACTA ADMINISTRATIVA)</li><li>F = FALTA INJUSTIFICADA (AMERITA ACTA ADMINISTRATIVA)</li><li>V = VACACIONES</li><li>N = NO LABORABLE</li><li>I = INCAPACIDAD</li></ul></div><div class="w-full flex flex-col items-center mt-20"><div class="w-1/4 h-[4px] bg-black"></div><p>JEFE DE PRODUCCIÓN'),c=new Date,X=new Date(c.getFullYear(),0,1),Z=Math.ceil(Math.floor((c-X)/(24*60*60*1e3))/7),m=c.getDay(),N=new Date;N.setDate(m<4?c.getDate()-m-3:c.getDate()-m+4);const ee=te(N,c),C={A:"bg-green-50 text-green-600",B:"bg-gray-50 text-gray-600",P:"bg-green-50 text-green-600",F:"bg-red-50 text-red-600",V:"bg-gray-50 text-gray-600",N:"bg-gray-50 text-gray-600",I:"bg-yellow-50 text-yellow-600"};function te(n,r){let e=[];for(let t=n;t<=r;t.setDate(t.getDate()+1)){const a=t.toUTCString().split(" ");e.push(`${a[1]} ${a[2]}`)}return e}function le(n,r,e){const t=new Array(e.length),a={0:"J",1:"V",2:"S",3:"D",4:"L",5:"M",6:"m"};for(let l=0;l<e.length;l++){t[l]={nombres:`${e[l].Nombres} ${e[l].APaterno}`.toUpperCase()};for(let s=0;s<n.length;s++)t[l][a[s]]="A"}for(let l=0;l<r.length;l++){const s=r[l],i=new Date(s.Fecha).toUTCString().split(" "),A=`${i[1]} ${i[2]}`,h=n.indexOf(A);let d,g=0;for(;g<e.length;){if(e[g].idTrabajador===s.idTrabajador){d=g;break}g++}t[d][a[h]]=s.idIncidencia}return t}function ne(n,r){const e=y(n),t=y(r);return H(e,"idNivel",!1),le(ee,t,e)}function o(n,r){return n==="nombres"||!C[r]?r:(()=>{const e=x(K);return u(e,r),B(()=>Y(e,`inline-flex w-full h-full font-bold justify-center items-center text-lg ${C[r]}`)),e})()}const re={J:o,V:o,S:o,D:o,L:o,M:o,m:o};function ie(){const[n,r]=D(null),[e,t]=D({state:"LOADING"}),[a]=S(G),[l]=S(z);let s=[x(Q)];return s=[s,...Object.values({0:"J",1:"V",2:"S",3:"D",4:"L",5:"M",6:"m"})],V(async()=>{if(a.state==="ready"&&l.state==="ready"){t({state:"READY",msg:""});const i=ne(a.latest,l.latest);r(i)}else a.error||l.error?t({state:"ERROR",msg:"Error de peticion de tablas"}):(a.loading||l.loading)&&t({state:"LOADING",msg:"Cargando informacion..."})}),f(U,{get children(){return[f(_,{get when(){return e().state==="ERROR"},get children(){return e().msg}}),f(_,{get when(){return e().state==="LOADING"},get children(){return e().msg}}),f(_,{get when(){return P(()=>e().state==="READY"&&n()!==null)()&&typeof n()?.length<"u"},get children(){const i=x(W),A=i.firstChild,h=A.nextSibling,d=h.firstChild,g=d.firstChild,w=g.nextSibling,[R,E]=b(w.nextSibling),M=d.nextSibling,O=h.nextSibling,[I,F]=b(O.nextSibling),L=I.nextSibling,$=L.firstChild,j=$.firstChild,k=j.nextSibling,[v,J]=b(k.nextSibling);return u(d,Z,R,E),u(M,()=>c.getFullYear()),u(i,f(q,{get data(){return n()},titles:s,col_conditions:re}),I,F),u($,()=>n().length,v,J),i}})]}})}export{ie as default};
