import{c as N,a as C,g as p,b as P,d as h,t as x,M as _,e as Y,f as b,i as g,S as G,h as z,j as q}from"./web.2e177a73.js";import{T as H}from"./Table.cb8ad8cf.js";import{f as K,a as Q,r as y,s as W}from"./fetch.e76ce3a6.js";const X=x("<span>"),Z=x('<h3 class="text-xl font-bold">Trabajador'),ee=x('<div class="w-full h-screen flex flex-col items-center gap-5"><h1 class="uppercase tracking-wide font-bold underline">José Salcedo Nuñez</h1><div class="flex justify-around uppercase w-full max-w-7xl"><h2>Nómina periodo <!#><!/></h2><h2></h2><h2 class="font-bold underline"></h2></div><!#><!/><div class="text-xs"><h3 class="font-bold uppercase">Trabajadores: <!#><!/></h3><h3 class="font-bold uppercase underline">Clave</h3><ul class="ml-5"><li>A = ASISTENCIA</li><li>B = BAJA</li><li>P = PERMISO (FALTA INJUSTIFICADA, NO AMERITA ACTA ADMINISTRATIVA)</li><li>F = FALTA INJUSTIFICADA (AMERITA ACTA ADMINISTRATIVA)</li><li>V = VACACIONES</li><li>N = NO LABORABLE</li><li>I = INCAPACIDAD</li></ul></div><div class="w-full flex flex-col items-center mt-20"><div class="w-1/4 h-[4px] bg-black"></div><p>JEFE DE PRODUCCIÓN'),c=new Date,te=new Date(c.getFullYear(),0,1),le=Math.ceil(Math.floor((c-te)/(24*60*60*1e3))/7),m=c.getDay(),E=new Date;E.setDate(m<4?c.getDate()-m-3:c.getDate()-m+4);const w=ne(E,c),T={A:"bg-green-50 text-green-600",B:"bg-gray-50 text-gray-600",P:"bg-green-50 text-green-600",F:"bg-red-50 text-red-600",V:"bg-gray-50 text-gray-600",N:"bg-gray-50 text-gray-600",I:"bg-yellow-50 text-yellow-600"};function ne(n,r){let e=[];for(let t=n;t<=r;t.setDate(t.getDate()+1)){const a=t.toUTCString().split(" ");e.push(`${a[1]} ${a[2]}`)}return e}function re(n,r,e){const t=new Array(e.length),a={0:"J",1:"V",2:"S",3:"D",4:"L",5:"M",6:"m"};for(let l=0;l<e.length;l++){t[l]={nombres:`${e[l].Nombres} ${e[l].APaterno}`.toUpperCase()};for(let i=0;i<n.length;i++)t[l][a[i]]="A"}for(let l=0;l<r.length;l++){const i=r[l],f=new Date(i.Fecha).toUTCString().split(" "),s=`${f[1]} ${f[2]}`,A=n.indexOf(s);let u,o=0;for(;o<e.length;){if(e[o].idTrabajador===i.idTrabajador){u=o;break}o++}t[u][a[A]]=i.idIncidencia}return t}function se(n,r){const e=y(n),t=y(r);return W(e,"idNivel",!1),re(w,t,e)}function d(n,r){return n==="nombres"||!T[r]?r:(()=>{const e=p(X);return g(e,r),z(()=>q(e,`inline-flex w-full h-full font-bold justify-center items-center text-lg ${T[r]}`)),e})()}const ae={J:d,V:d,S:d,D:d,L:d,M:d,m:d};function de(){const[n,r]=N(null),[e,t]=N({state:"LOADING"}),[a]=C(K),[l]=C(Q),i={0:"J",1:"V",2:"S",3:"D",4:"L",5:"M",6:"m"},I={0:"ENE",1:"FEB",2:"MAR",3:"ABR",4:"MAY",5:"JUN",6:"JUL",7:"AGO",8:"SEP",9:"OCT",10:"NOV",11:"DIC"};let f={0:p(Z)};for(let s=0;s<7;s++)f[s+1]=`${i[s]} - ${w[s].split(" ")[0]}`;return P(async()=>{if(a.state==="ready"&&l.state==="ready"){t({state:"READY",msg:""});const s=se(a.latest,l.latest);r(s)}else a.error||l.error?t({state:"ERROR",msg:"Error de peticion de tablas"}):(a.loading||l.loading)&&t({state:"LOADING",msg:"Cargando informacion..."})}),h(G,{get children(){return[h(_,{get when(){return e().state==="ERROR"},get children(){return e().msg}}),h(_,{get when(){return e().state==="LOADING"},get children(){return e().msg}}),h(_,{get when(){return Y(()=>e().state==="READY"&&n()!==null)()&&typeof n()?.length<"u"},get children(){const s=p(ee),A=s.firstChild,u=A.nextSibling,o=u.firstChild,R=o.firstChild,M=R.nextSibling,[O,F]=b(M.nextSibling),$=o.nextSibling,L=$.nextSibling,j=u.nextSibling,[S,J]=b(j.nextSibling),V=S.nextSibling,D=V.firstChild,v=D.firstChild,U=v.nextSibling,[k,B]=b(U.nextSibling);return g(o,le,O,F),g($,()=>I[c.getMonth()]),g(L,()=>c.getFullYear()),g(s,h(H,{get data(){return n()},get titles(){return Object.values(f)},col_conditions:ae}),S,J),g(D,()=>n().length,k,B),s}})]}})}export{de as default};
