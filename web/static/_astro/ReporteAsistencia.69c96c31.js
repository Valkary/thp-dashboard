import{e as R,c as C,g as b,f as k,a as h,t as m,S as I,b as D,i as u,j as P,d as Y,h as G,k as z}from"./web.62d84d6d.js";import{c as Z,d as q,S as H,r as N,s as K}from"./Spinner.512ba937.js";import{T as Q}from"./Table.fe7b6c68.js";const W=m("<span>"),X=m('<h3 class="text-xl font-bold">Trabajador'),ee=m('<div class="flex flex-row items-center gap-4 text-xl font-bold"><!#><!/><p>'),te=m('<div class="w-full max-w-[800px] h-screen flex flex-col items-center gap-5 max-h-screen overflow-hidden px-5"><h1 class="uppercase tracking-wide font-bold underline">José Salcedo Nuñez</h1><div class="flex justify-around uppercase w-full max-w-7xl"><h2>Nómina periodo <!#><!/></h2><h2></h2><h2 class="font-bold underline"></h2></div><div class="max-w-7xl"></div><div class="text-xs w-full"><h3 class="font-bold uppercase">Trabajadores: <!#><!/></h3><h3 class="font-bold uppercase underline">Clave</h3><ul class="ml-5"><li>A = ASISTENCIA</li><li>B = BAJA</li><li>P = PERMISO (FALTA INJUSTIFICADA, NO AMERITA ACTA ADMINISTRATIVA)</li><li>F = FALTA INJUSTIFICADA (AMERITA ACTA ADMINISTRATIVA)</li><li>V = VACACIONES</li><li>N = NO LABORABLE</li><li>I = INCAPACIDAD</li></ul></div><div class="w-full flex flex-col items-center mt-5"><div class="w-1/4 h-[4px] bg-black"></div><p>JEFE DE PRODUCCIÓN'),o=new Date,le=new Date(o.getFullYear(),0,1),ne=Math.ceil(Math.floor((o-le)/(24*60*60*1e3))/7),A=o.getDay(),S=new Date,y=new Date;S.setDate(A<4?o.getDate()-A-3:o.getDate()-A+4);y.setDate(A<4?o.getDate()-A+3:o.getDate()-A+10);const O=se(S,y),T={A:"bg-green-50 text-green-600",B:"bg-gray-50 text-gray-600",P:"bg-green-50 text-green-600",F:"bg-red-50 text-red-600",V:"bg-gray-50 text-gray-600",N:"bg-gray-50 text-gray-600",I:"bg-yellow-50 text-yellow-600"};function se(n,l){let e=[],s=new Date(n.getTime());for(let r=s;r<=l;r.setDate(r.getDate()+1)){const i=r.toUTCString().split(" ");e.push(`${i[1]} ${i[2]}`)}return e}function ae(n,l,e){const s=new Array(e.length),r=o.getDate()-S.getDate()+1,i={0:"J",1:"V",2:"S",3:"D",4:"L",5:"M",6:"m"};for(let a=0;a<e.length;a++){s[a]={nombres:`${e[a].Nombres} ${e[a].APaterno}`.toUpperCase()};for(let c=0;c<r;c++)s[a][i[c]]="A"}for(let a=0;a<l.length;a++){const c=l[a],t=new Date(c.Fecha).toUTCString().split(" "),x=`${t[1]} ${t[2]}`,d=n.indexOf(x);let g,f=0;for(;f<e.length;){if(e[f].idTrabajador===c.idTrabajador){g=f;break}f++}d!==-1&&(s[g][i[d]]=c.idIncidencia)}return s}function re(n,l){const e=N(n),s=N(l);return K(e,"idNivel",!1),ae(O,s,e)}function _(n,l){return n==="nombres"||!T[l]?l:(()=>{const e=b(W);return u(e,l),G(()=>z(e,`inline-flex w-full h-full font-bold justify-center items-center text-lg ${T[l]}`)),e})()}const ie={J:_,V:_,S:_,D:_,L:_,M:_,m:_};function ge(){const[n,l]=R(null),[e,s]=R({state:"LOADING"}),[r]=C(Z),[i]=C(q),a={0:"J",1:"V",2:"S",3:"D",4:"L",5:"M",6:"m"},c={0:"ENERO",1:"FEBRERO",2:"MARZO",3:"ABRIL",4:"MAYO",5:"JUNIO",6:"JULIO",7:"AGOSTO",8:"SEPTIEMBRE",9:"OCTUBRE",10:"NOVIEMBRE",11:"DICIEMBRE"};let p={0:b(X)};for(let t=0;t<7;t++)p[t+1]=`${a[t]} ${O[t].split(" ")[0]}`;return k(async()=>{if(r.state==="ready"&&i.state==="ready"){s({state:"READY",msg:""});const t=re(r(),i());l(t)}else r.error||i.error?s({state:"ERROR",msg:"Error de peticion de tablas"}):(r.loading||i.loading)&&s({state:"LOADING",msg:"Cargando informacion..."})}),h(Y,{get children(){return[h(I,{get when(){return e().state==="ERROR"},get children(){return e().msg}}),h(I,{get when(){return e().state==="LOADING"},get children(){const t=b(ee),x=t.firstChild,[d,g]=D(x.nextSibling),f=d.nextSibling;return u(t,h(H,{size:"lg"}),d,g),u(f,()=>e().msg),t}}),h(I,{get when(){return P(()=>e().state==="READY"&&n()!==null)()&&typeof n()?.length<"u"},get children(){const t=b(te),x=t.firstChild,d=x.nextSibling,g=d.firstChild,f=g.firstChild,M=f.nextSibling,[v,L]=D(M.nextSibling),$=g.nextSibling,B=$.nextSibling,E=d.nextSibling,F=E.nextSibling,w=F.firstChild,j=w.firstChild,J=j.nextSibling,[U,V]=D(J.nextSibling);return u(g,ne,v,L),u($,()=>c[o.getMonth()]),u(B,()=>o.getFullYear()),u(E,h(Q,{get data(){return n()},get titles(){return Object.values(p)},col_conditions:ie})),u(w,()=>n().length,U,V),t}})]}})}export{ge as default};
