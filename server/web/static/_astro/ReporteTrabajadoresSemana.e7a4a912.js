import{c as p,e as $,f as x,a as c,g as u,S as f,b as y,i as h,j as k,d as T,t as m,k as C}from"./web.62d84d6d.js";import{g as E,h as M,S as F}from"./Spinner.512ba937.js";import{T as N}from"./Table.fe7b6c68.js";const d=new Date;new Date(d.getFullYear(),0,1);const l=d.getDay(),D=new Date,w=new Date;D.setDate(l<4?d.getDate()-l-3:d.getDate()-l+4);w.setDate(l<4?d.getDate()-l+3:d.getDate()-l+10);function J(n,e){let r=[],a=new Date(n.getTime());for(let t=a;t<=e;t.setDate(t.getDate()+1)){const o=t.toUTCString().split(" ");r.push(`${o[1]} ${o[2]}`)}return r}const b={0:"J",1:"V",2:"S",3:"D",4:"L",5:"M",6:"m"};function L(n,e){const r=new Array(n.length);for(let a=0;a<n.length;a++)r[a]={id:n[a].idTrabajador,nombres:`${n[a].Nombres} ${n[a].APaterno}`.toUpperCase(),J:e,V:e,S:e,D:e,L:e,M:e,m:e};return r}function V(n,e,r){const a={};for(let t=0;t<n.length;t++)a[n[t].id]=t;for(const t in r){const o=r[t];for(let i=0;i<o.length;i++){const g=new Date(o[i]).toUTCString().split(" "),S=`${g[1]} ${g[2]}`,_=b[e.indexOf(S)];_!==void 0&&(n[a[t]][_]=!0)}}}const j=m("<span>"),O=m('<div class="flex flex-row items-center gap-4 text-xl font-bold"><!#><!/><p>Cargando información...'),R=m("<div>Error");function s(n,e){return Object.values(b).indexOf(n)===-1?e:(()=>{const r=u(j);return C(r,`inline-flex w-full h-full font-bold justify-center items-center text-lg ${e?"bg-green-300":"bg-red-300"}`),h(r,e?"✔️":"✖️"),r})()}const U={J:s,V:s,S:s,D:s,L:s,M:s,m:s},A=J(D,w);function q(){const[n]=p(E),[e]=p(M),[r,a]=$(null);return x(()=>{if(e.state==="ready"&&n.state==="ready"){const t=L(e(),!1);V(t,A,n()),a(t)}}),c(T,{get fallback(){return u(R)},get children(){return[c(f,{get when(){return n.loading||e.loading},get children(){const t=u(O),o=t.firstChild,[i,g]=y(o.nextSibling);return i.nextSibling,h(t,c(F,{size:"lg"}),i,g),t}}),c(f,{get when(){return n.error||e.error},children:"Error de carga!"}),c(f,{get when(){return k(()=>typeof r()<"u")()&&r()!==null},get children(){return c(N,{get data(){return r()},titles:["Nombres","J","V","S","D","L","M","m"],col_conditions:U,ignore_cols:["id"]})}})]}})}export{q as default};
