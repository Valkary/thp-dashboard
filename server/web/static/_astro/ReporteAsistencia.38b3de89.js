import{c as w,a as R,g as I,j as k,e as _,t as p,M as x,f as P,b as N,i as u,k as Y,l as G,m as z}from"./web.a82d59ce.js";import{a as Z,b as q,r as T,s as H}from"./fetch.23516fc6.js";import{T as K}from"./Table.978b5d0e.js";const Q=p("<span>"),W=p('<h3 class="text-xl font-bold">Trabajador'),X=p('<div class="w-full max-w-[800px] h-screen flex flex-col items-center gap-5 max-h-screen overflow-hidden px-5"><h1 class="uppercase tracking-wide font-bold underline">José Salcedo Nuñez</h1><div class="flex justify-around uppercase w-full max-w-7xl"><h2>Nómina periodo <!#><!/></h2><h2></h2><h2 class="font-bold underline"></h2></div><div class="max-w-7xl"></div><div class="text-xs w-full"><h3 class="font-bold uppercase">Trabajadores: <!#><!/></h3><h3 class="font-bold uppercase underline">Clave</h3><ul class="ml-5"><li>A = ASISTENCIA</li><li>B = BAJA</li><li>P = PERMISO (FALTA INJUSTIFICADA, NO AMERITA ACTA ADMINISTRATIVA)</li><li>F = FALTA INJUSTIFICADA (AMERITA ACTA ADMINISTRATIVA)</li><li>V = VACACIONES</li><li>N = NO LABORABLE</li><li>I = INCAPACIDAD</li></ul></div><div class="w-full flex flex-col items-center mt-5"><div class="w-1/4 h-[4px] bg-black"></div><p>JEFE DE PRODUCCIÓN'),o=new Date,ee=new Date(o.getFullYear(),0,1),te=Math.ceil(Math.floor((o-ee)/(24*60*60*1e3))/7),h=o.getDay(),D=new Date,y=new Date;D.setDate(h<4?o.getDate()-h-3:o.getDate()-h+4);y.setDate(h<4?o.getDate()-h+3:o.getDate()-h+10);const O=ne(D,y),C={A:"bg-green-50 text-green-600",B:"bg-gray-50 text-gray-600",P:"bg-green-50 text-green-600",F:"bg-red-50 text-red-600",V:"bg-gray-50 text-gray-600",N:"bg-gray-50 text-gray-600",I:"bg-yellow-50 text-yellow-600"};function ne(l,t){let e=[],a=new Date(l.getTime());for(let r=a;r<=t;r.setDate(r.getDate()+1)){const i=r.toUTCString().split(" ");e.push(`${i[1]} ${i[2]}`)}return e}function le(l,t,e){const a=new Array(e.length),r=o.getDate()-D.getDate()+1,i={0:"J",1:"V",2:"S",3:"D",4:"L",5:"M",6:"m"};for(let s=0;s<e.length;s++){a[s]={nombres:`${e[s].Nombres} ${e[s].APaterno}`.toUpperCase()};for(let c=0;c<r;c++)a[s][i[c]]="A"}for(let s=0;s<t.length;s++){const c=t[s],n=new Date(c.Fecha).toUTCString().split(" "),m=`${n[1]} ${n[2]}`,A=l.indexOf(m);let g,f=0;for(;f<e.length;){if(e[f].idTrabajador===c.idTrabajador){g=f;break}f++}A!==-1&&(a[g][i[A]]=c.idIncidencia)}return a}function ae(l,t){const e=T(l),a=T(t);return H(e,"idNivel",!1),le(O,a,e)}function d(l,t){return l==="nombres"||!C[t]?t:(()=>{const e=I(Q);return u(e,t),G(()=>z(e,`inline-flex w-full h-full font-bold justify-center items-center text-lg ${C[t]}`)),e})()}const se={J:d,V:d,S:d,D:d,L:d,M:d,m:d};function ce(){const[l,t]=w(null),[e,a]=w({state:"LOADING"}),[r]=R(Z),[i]=R(q),s={0:"J",1:"V",2:"S",3:"D",4:"L",5:"M",6:"m"},c={0:"ENERO",1:"FEBRERO",2:"MARZO",3:"ABRIL",4:"MAYO",5:"JUNIO",6:"JULIO",7:"AGOSTO",8:"SEPTIEMBRE",9:"OCTUBRE",10:"NOVIEMBRE",11:"DICIEMBRE"};let b={0:I(W)};for(let n=0;n<7;n++)b[n+1]=`${s[n]} ${O[n].split(" ")[0]}`;return k(async()=>{if(r.state==="ready"&&i.state==="ready"){a({state:"READY",msg:""});const n=ae(r(),i());t(n)}else r.error||i.error?a({state:"ERROR",msg:"Error de peticion de tablas"}):(r.loading||i.loading)&&a({state:"LOADING",msg:"Cargando informacion..."})}),_(Y,{get children(){return[_(x,{get when(){return e().state==="ERROR"},get children(){return e().msg}}),_(x,{get when(){return e().state==="LOADING"},get children(){return e().msg}}),_(x,{get when(){return P(()=>e().state==="READY"&&l()!==null)()&&typeof l()?.length<"u"},get children(){const n=I(X),m=n.firstChild,A=m.nextSibling,g=A.firstChild,f=g.firstChild,M=f.nextSibling,[L,v]=N(M.nextSibling),E=g.nextSibling,B=E.nextSibling,S=A.nextSibling,F=S.nextSibling,$=F.firstChild,j=$.firstChild,J=j.nextSibling,[U,V]=N(J.nextSibling);return u(g,te,L,v),u(E,()=>c[o.getMonth()]),u(B,()=>o.getFullYear()),u(S,_(K,{get data(){return l()},get titles(){return Object.values(b)},col_conditions:se})),u($,()=>l().length,U,V),n}})]}})}export{ce as default};
