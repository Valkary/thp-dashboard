import{c as y,a as T,g as p,b as Y,d as A,t as I,M as x,e as G,f as D,i as u,S as z,h as q,j as H}from"./web.fde07de3.js";import{f as K,a as Q,r as w,s as W}from"./fetch.d88dc9a8.js";import{T as X}from"./Table.82a1d3fd.js";const Z=I("<span>"),ee=I('<h3 class="text-xl font-bold">Trabajador'),te=I('<div class="w-full h-screen flex flex-col items-center gap-5"><h1 class="uppercase tracking-wide font-bold underline">José Salcedo Nuñez</h1><div class="flex justify-around uppercase w-full max-w-7xl"><h2>Nómina periodo <!#><!/></h2><h2></h2><h2 class="font-bold underline"></h2></div><!#><!/><div class="text-xs"><h3 class="font-bold uppercase">Trabajadores: <!#><!/></h3><h3 class="font-bold uppercase underline">Clave</h3><ul class="ml-5"><li>A = ASISTENCIA</li><li>B = BAJA</li><li>P = PERMISO (FALTA INJUSTIFICADA, NO AMERITA ACTA ADMINISTRATIVA)</li><li>F = FALTA INJUSTIFICADA (AMERITA ACTA ADMINISTRATIVA)</li><li>V = VACACIONES</li><li>N = NO LABORABLE</li><li>I = INCAPACIDAD</li></ul></div><div class="w-full flex flex-col items-center mt-20"><div class="w-1/4 h-[4px] bg-black"></div><p>JEFE DE PRODUCCIÓN'),o=new Date,ne=new Date(o.getFullYear(),0,1),le=Math.ceil(Math.floor((o-ne)/(24*60*60*1e3))/7),h=o.getDay(),$=new Date,R=new Date;$.setDate(h<4?o.getDate()-h-3:o.getDate()-h+4);R.setDate(h<4?o.getDate()-h+3:o.getDate()-h+10);const M=ae($,R),E={A:"bg-green-50 text-green-600",B:"bg-gray-50 text-gray-600",P:"bg-green-50 text-green-600",F:"bg-red-50 text-red-600",V:"bg-gray-50 text-gray-600",N:"bg-gray-50 text-gray-600",I:"bg-yellow-50 text-yellow-600"};function ae(l,n){let e=[],a=new Date(l.getTime());for(let r=a;r<=n;r.setDate(r.getDate()+1)){const i=r.toUTCString().split(" ");e.push(`${i[1]} ${i[2]}`)}return e}function se(l,n,e){const a=new Array(e.length),r=o.getDate()-$.getDate()+1,i={0:"J",1:"V",2:"S",3:"D",4:"L",5:"M",6:"m"};for(let s=0;s<e.length;s++){a[s]={nombres:`${e[s].Nombres} ${e[s].APaterno}`.toUpperCase()};for(let c=0;c<r;c++)a[s][i[c]]="A"}for(let s=0;s<n.length;s++){const c=n[s],t=new Date(c.Fecha).toUTCString().split(" "),m=`${t[1]} ${t[2]}`,_=l.indexOf(m);let g,f=0;for(;f<e.length;){if(e[f].idTrabajador===c.idTrabajador){g=f;break}f++}a[g][i[_]]=c.idIncidencia}return a}function re(l,n){const e=w(l),a=w(n);return W(e,"idNivel",!1),se(M,a,e)}function d(l,n){return l==="nombres"||!E[n]?n:(()=>{const e=p(Z);return u(e,n),q(()=>H(e,`inline-flex w-full h-full font-bold justify-center items-center text-lg ${E[n]}`)),e})()}const ie={J:d,V:d,S:d,D:d,L:d,M:d,m:d};function ge(){const[l,n]=y(null),[e,a]=y({state:"LOADING"}),[r]=T(K),[i]=T(Q),s={0:"J",1:"V",2:"S",3:"D",4:"L",5:"M",6:"m"},c={0:"ENE",1:"FEB",2:"MAR",3:"ABR",4:"MAY",5:"JUN",6:"JUL",7:"AGO",8:"SEP",9:"OCT",10:"NOV",11:"DIC"};let b={0:p(ee)};for(let t=0;t<7;t++)b[t+1]=`${s[t]} - ${M[t].split(" ")[0]}`;return Y(async()=>{if(r.state==="ready"&&i.state==="ready"){a({state:"READY",msg:""});const t=re(r.latest,i.latest);n(t)}else r.error||i.error?a({state:"ERROR",msg:"Error de peticion de tablas"}):(r.loading||i.loading)&&a({state:"LOADING",msg:"Cargando informacion..."})}),A(z,{get children(){return[A(x,{get when(){return e().state==="ERROR"},get children(){return e().msg}}),A(x,{get when(){return e().state==="LOADING"},get children(){return e().msg}}),A(x,{get when(){return G(()=>e().state==="READY"&&l()!==null)()&&typeof l()?.length<"u"},get children(){const t=p(te),m=t.firstChild,_=m.nextSibling,g=_.firstChild,f=g.firstChild,O=f.nextSibling,[F,L]=D(O.nextSibling),S=g.nextSibling,j=S.nextSibling,J=_.nextSibling,[N,V]=D(J.nextSibling),v=N.nextSibling,C=v.firstChild,U=C.firstChild,k=U.nextSibling,[B,P]=D(k.nextSibling);return u(g,le,F,L),u(S,()=>c[o.getMonth()]),u(j,()=>o.getFullYear()),u(t,A(X,{get data(){return l()},get titles(){return Object.values(b)},col_conditions:ie}),N,V),u(C,()=>l().length,B,P),t}})]}})}export{ge as default};
